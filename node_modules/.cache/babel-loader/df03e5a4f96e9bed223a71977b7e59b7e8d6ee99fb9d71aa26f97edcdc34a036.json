{"ast":null,"code":"\"use strict\";\n\n/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.QueryPartition = void 0;\nconst field_order_1 = require(\"./reference/field-order\");\nconst query_1 = require(\"./reference/query\");\nconst query_options_1 = require(\"./reference/query-options\");\nconst path_1 = require(\"./path\");\nconst serializer_1 = require(\"./serializer\");\n/**\n * A split point that can be used in a query as a starting and/or end point for\n * the query results. The cursors returned by {@link #startAt} and {@link\n * #endBefore} can only be used in a query that matches the constraint of query\n * that produced this partition.\n *\n * @class QueryPartition\n */\nclass QueryPartition {\n  /** @private */\n  constructor(_firestore, _collectionId, _converter, _startAt, _endBefore) {\n    this._firestore = _firestore;\n    this._collectionId = _collectionId;\n    this._converter = _converter;\n    this._startAt = _startAt;\n    this._endBefore = _endBefore;\n    this._serializer = new serializer_1.Serializer(_firestore);\n  }\n  /**\n   * The cursor that defines the first result for this partition or `undefined`\n   * if this is the first partition. The cursor value must be\n   * destructured when passed to `startAt()` (for example with\n   * `query.startAt(...queryPartition.startAt)`).\n   *\n   * @example\n   * ```\n   * const query = firestore.collectionGroup('collectionId');\n   * for await (const partition of query.getPartitions(42)) {\n   *   let partitionedQuery = query.orderBy(FieldPath.documentId());\n   *   if (partition.startAt) {\n   *     partitionedQuery = partitionedQuery.startAt(...partition.startAt);\n   *   }\n   *   if (partition.endBefore) {\n   *     partitionedQuery = partitionedQuery.endBefore(...partition.endBefore);\n   *   }\n   *   const querySnapshot = await partitionedQuery.get();\n   *   console.log(`Partition contained ${querySnapshot.length} documents`);\n   * }\n   *\n   * ```\n   * @type {Array<*>}\n   * @return {Array<*>} A cursor value that can be used with {@link\n   * Query#startAt} or `undefined` if this is the first partition.\n   */\n  get startAt() {\n    if (this._startAt && !this._memoizedStartAt) {\n      this._memoizedStartAt = this._startAt.map(v => this._serializer.decodeValue(v));\n    }\n    return this._memoizedStartAt;\n  }\n  /**\n   * The cursor that defines the first result after this partition or\n   * `undefined` if this is the last partition.  The cursor value must be\n   * destructured when passed to `endBefore()` (for example with\n   * `query.endBefore(...queryPartition.endBefore)`).\n   *\n   * @example\n   * ```\n   * const query = firestore.collectionGroup('collectionId');\n   * for await (const partition of query.getPartitions(42)) {\n   *   let partitionedQuery = query.orderBy(FieldPath.documentId());\n   *   if (partition.startAt) {\n   *     partitionedQuery = partitionedQuery.startAt(...partition.startAt);\n   *   }\n   *   if (partition.endBefore) {\n   *     partitionedQuery = partitionedQuery.endBefore(...partition.endBefore);\n   *   }\n   *   const querySnapshot = await partitionedQuery.get();\n   *   console.log(`Partition contained ${querySnapshot.length} documents`);\n   * }\n   *\n   * ```\n   * @type {Array<*>}\n   * @return {Array<*>} A cursor value that can be used with {@link\n   * Query#endBefore} or `undefined` if this is the last partition.\n   */\n  get endBefore() {\n    if (this._endBefore && !this._memoizedEndBefore) {\n      this._memoizedEndBefore = this._endBefore.map(v => this._serializer.decodeValue(v));\n    }\n    return this._memoizedEndBefore;\n  }\n  /**\n   * Returns a query that only encapsulates the documents for this partition.\n   *\n   * @example\n   * ```\n   * const query = firestore.collectionGroup('collectionId');\n   * for await (const partition of query.getPartitions(42)) {\n   *   const partitionedQuery = partition.toQuery();\n   *   const querySnapshot = await partitionedQuery.get();\n   *   console.log(`Partition contained ${querySnapshot.length} documents`);\n   * }\n   *\n   * ```\n   * @return {Query<T>} A query partitioned by a {@link Query#startAt} and\n   * {@link Query#endBefore} cursor.\n   */\n  toQuery() {\n    // Since the api.Value to JavaScript type conversion can be lossy (unless\n    // `useBigInt` is used), we pass the original protobuf representation to the\n    // created query.\n    let queryOptions = query_options_1.QueryOptions.forCollectionGroupQuery(this._collectionId, this._converter);\n    queryOptions = queryOptions.with({\n      fieldOrders: [new field_order_1.FieldOrder(path_1.FieldPath.documentId())]\n    });\n    if (this._startAt !== undefined) {\n      queryOptions = queryOptions.with({\n        startAt: {\n          before: true,\n          values: this._startAt\n        }\n      });\n    }\n    if (this._endBefore !== undefined) {\n      queryOptions = queryOptions.with({\n        endAt: {\n          before: true,\n          values: this._endBefore\n        }\n      });\n    }\n    return new query_1.Query(this._firestore, queryOptions);\n  }\n}\nexports.QueryPartition = QueryPartition;","map":{"version":3,"names":["Object","defineProperty","exports","value","QueryPartition","field_order_1","require","query_1","query_options_1","path_1","serializer_1","constructor","_firestore","_collectionId","_converter","_startAt","_endBefore","_serializer","Serializer","startAt","_memoizedStartAt","map","v","decodeValue","endBefore","_memoizedEndBefore","toQuery","queryOptions","QueryOptions","forCollectionGroupQuery","with","fieldOrders","FieldOrder","FieldPath","documentId","undefined","before","values","endAt","Query"],"sources":["C:/Users/ATTA UR REHMAN/Music/Fida/Cupboard/node_modules/@google-cloud/firestore/build/src/query-partition.js"],"sourcesContent":["\"use strict\";\n/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.QueryPartition = void 0;\nconst field_order_1 = require(\"./reference/field-order\");\nconst query_1 = require(\"./reference/query\");\nconst query_options_1 = require(\"./reference/query-options\");\nconst path_1 = require(\"./path\");\nconst serializer_1 = require(\"./serializer\");\n/**\n * A split point that can be used in a query as a starting and/or end point for\n * the query results. The cursors returned by {@link #startAt} and {@link\n * #endBefore} can only be used in a query that matches the constraint of query\n * that produced this partition.\n *\n * @class QueryPartition\n */\nclass QueryPartition {\n    /** @private */\n    constructor(_firestore, _collectionId, _converter, _startAt, _endBefore) {\n        this._firestore = _firestore;\n        this._collectionId = _collectionId;\n        this._converter = _converter;\n        this._startAt = _startAt;\n        this._endBefore = _endBefore;\n        this._serializer = new serializer_1.Serializer(_firestore);\n    }\n    /**\n     * The cursor that defines the first result for this partition or `undefined`\n     * if this is the first partition. The cursor value must be\n     * destructured when passed to `startAt()` (for example with\n     * `query.startAt(...queryPartition.startAt)`).\n     *\n     * @example\n     * ```\n     * const query = firestore.collectionGroup('collectionId');\n     * for await (const partition of query.getPartitions(42)) {\n     *   let partitionedQuery = query.orderBy(FieldPath.documentId());\n     *   if (partition.startAt) {\n     *     partitionedQuery = partitionedQuery.startAt(...partition.startAt);\n     *   }\n     *   if (partition.endBefore) {\n     *     partitionedQuery = partitionedQuery.endBefore(...partition.endBefore);\n     *   }\n     *   const querySnapshot = await partitionedQuery.get();\n     *   console.log(`Partition contained ${querySnapshot.length} documents`);\n     * }\n     *\n     * ```\n     * @type {Array<*>}\n     * @return {Array<*>} A cursor value that can be used with {@link\n     * Query#startAt} or `undefined` if this is the first partition.\n     */\n    get startAt() {\n        if (this._startAt && !this._memoizedStartAt) {\n            this._memoizedStartAt = this._startAt.map(v => this._serializer.decodeValue(v));\n        }\n        return this._memoizedStartAt;\n    }\n    /**\n     * The cursor that defines the first result after this partition or\n     * `undefined` if this is the last partition.  The cursor value must be\n     * destructured when passed to `endBefore()` (for example with\n     * `query.endBefore(...queryPartition.endBefore)`).\n     *\n     * @example\n     * ```\n     * const query = firestore.collectionGroup('collectionId');\n     * for await (const partition of query.getPartitions(42)) {\n     *   let partitionedQuery = query.orderBy(FieldPath.documentId());\n     *   if (partition.startAt) {\n     *     partitionedQuery = partitionedQuery.startAt(...partition.startAt);\n     *   }\n     *   if (partition.endBefore) {\n     *     partitionedQuery = partitionedQuery.endBefore(...partition.endBefore);\n     *   }\n     *   const querySnapshot = await partitionedQuery.get();\n     *   console.log(`Partition contained ${querySnapshot.length} documents`);\n     * }\n     *\n     * ```\n     * @type {Array<*>}\n     * @return {Array<*>} A cursor value that can be used with {@link\n     * Query#endBefore} or `undefined` if this is the last partition.\n     */\n    get endBefore() {\n        if (this._endBefore && !this._memoizedEndBefore) {\n            this._memoizedEndBefore = this._endBefore.map(v => this._serializer.decodeValue(v));\n        }\n        return this._memoizedEndBefore;\n    }\n    /**\n     * Returns a query that only encapsulates the documents for this partition.\n     *\n     * @example\n     * ```\n     * const query = firestore.collectionGroup('collectionId');\n     * for await (const partition of query.getPartitions(42)) {\n     *   const partitionedQuery = partition.toQuery();\n     *   const querySnapshot = await partitionedQuery.get();\n     *   console.log(`Partition contained ${querySnapshot.length} documents`);\n     * }\n     *\n     * ```\n     * @return {Query<T>} A query partitioned by a {@link Query#startAt} and\n     * {@link Query#endBefore} cursor.\n     */\n    toQuery() {\n        // Since the api.Value to JavaScript type conversion can be lossy (unless\n        // `useBigInt` is used), we pass the original protobuf representation to the\n        // created query.\n        let queryOptions = query_options_1.QueryOptions.forCollectionGroupQuery(this._collectionId, this._converter);\n        queryOptions = queryOptions.with({\n            fieldOrders: [new field_order_1.FieldOrder(path_1.FieldPath.documentId())],\n        });\n        if (this._startAt !== undefined) {\n            queryOptions = queryOptions.with({\n                startAt: { before: true, values: this._startAt },\n            });\n        }\n        if (this._endBefore !== undefined) {\n            queryOptions = queryOptions.with({\n                endAt: { before: true, values: this._endBefore },\n            });\n        }\n        return new query_1.Query(this._firestore, queryOptions);\n    }\n}\nexports.QueryPartition = QueryPartition;\n//# sourceMappingURL=query-partition.js.map"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}